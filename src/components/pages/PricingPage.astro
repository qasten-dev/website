---
import Layout from "@/layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import { getSafeCurrentLocale } from "@/utils/i18n";
import { getRelativeLocaleUrl } from "astro:i18n";

const currentLocale = getSafeCurrentLocale(Astro.currentLocale);
const bookCallURL = getRelativeLocaleUrl(
  currentLocale,
  "/#book-call",
).replace(/\/$/, "");

const features = [
  {
    icon: "mdi:phone-in-talk-outline",
    title: "Multi-Channel Intake",
    description: "Capture leads from web, phone, text, and chat",
  },
  {
    icon: "mdi:calendar-check-outline",
    title: "Automated Job Booking",
    description: "Leads scheduled directly into your calendar",
  },
  {
    icon: "mdi:email-fast-outline",
    title: "Follow-Up Sequences",
    description: "Confirmations, reminders, and review requests",
  },
  {
    icon: "mdi:chart-box-outline",
    title: "Performance Dashboard",
    description: "See all leads, bookings, and ROI in real-time",
  },
  {
    icon: "mdi:connection",
    title: "CRM Integration",
    description: "Works with your existing calendar and scheduling tools",
  },
  {
    icon: "mdi:headset",
    title: "Dedicated Support",
    description: "US-based team available to help you succeed",
  },
];

const trustBadges = [
  { icon: "mdi:file-document-remove-outline", label: "No Contracts" },
  { icon: "mdi:clock-outline", label: "Cancel Anytime" },
  { icon: "mdi:flash-outline", label: "Quick Setup" },
  { icon: "mdi:snowflake", label: "HVAC Specific" },
];
---

<Layout
  title="Pricing | Qasten"
  description="Simple, transparent pricing for HVAC companies. Multi-channel AI intake starting at $2,000/mo with 10x ROI."
  noBackground={true}
>
  <main class="w-full">
    <!-- Hero Section -->
    <section
      class="relative left-1/2 w-screen -translate-x-1/2 overflow-hidden bg-gradient-to-br from-neutral-950 via-neutral-900 to-neutral-950"
    >
      <div class="hero-mesh"></div>
      <div class="absolute top-20 left-8 h-72 w-72 rounded-full bg-primary/20 blur-[110px]"></div>
      <div class="absolute right-8 bottom-10 h-80 w-80 rounded-full bg-[var(--brand-accent)]/10 blur-[120px]"></div>

      <div class="container-custom relative z-10 py-20 text-center md:py-28 lg:py-32">
        <div class="mx-auto max-w-4xl">
          <span class="badge badge-dark mb-8">Pricing</span>
          <h1 class="mb-6 text-4xl font-bold tracking-tight text-white sm:text-5xl lg:text-6xl">
            Investment That{" "}
            <span class="bg-gradient-to-r from-[var(--brand-secondary)] to-[var(--brand-secondary-light)] bg-clip-text text-transparent">
              Pays for Itself
            </span>
          </h1>
          <p class="mx-auto mb-10 max-w-3xl text-lg leading-relaxed text-neutral-300 sm:text-2xl">
            Every HVAC company is different. Get a custom quote tailored to your
            call volume, channels, and service area.
          </p>

          <div class="mt-10 flex flex-wrap items-center justify-center gap-4">
            <span class="hero-trust-item">
              <Icon
                name="mdi:check-circle-outline"
                class="text-[var(--brand-accent)] text-base"
              />
              No Long-Term Contracts
            </span>
            <span class="hero-trust-item">
              <Icon
                name="mdi:check-circle-outline"
                class="text-[var(--brand-accent)] text-base"
              />
              Cancel Anytime
            </span>
            <span class="hero-trust-item">
              <Icon
                name="mdi:check-circle-outline"
                class="text-[var(--brand-accent)] text-base"
              />
              HVAC-Specific
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing Card Section -->
    <section class="section-spacing bg-neutral-50">
      <div class="container-custom">
        <div class="pricing-card-wrapper mx-auto max-w-3xl">
          <!-- Popular badge -->
          <div class="pricing-popular-bar">
            <span class="pricing-popular-badge">Most Popular for HVAC</span>
          </div>

          <div class="pricing-main-card airvvy-card">
            <!-- Card Header -->
            <div class="text-center pt-8 pb-4 px-6">
              <h2 class="text-2xl font-bold tracking-tight text-neutral-900 sm:text-3xl">
                Multi-Channel HVAC Intake
              </h2>
              <p class="mt-2 text-base text-neutral-500">
                Capture every lead — web, phone, text, and chat
              </p>
            </div>

            <!-- Custom Quote Message -->
            <div class="mx-6 mb-6 sm:mx-8">
              <div class="pricing-quote-box">
                <span class="pricing-quote-icon">
                  <Icon name="mdi:tune-variant" class="text-2xl text-primary" />
                </span>
                <div>
                  <p class="text-base font-bold text-neutral-900">Custom Pricing for Your Business</p>
                  <p class="mt-1 text-sm leading-relaxed text-neutral-500">
                    Every HVAC company is different. We tailor pricing based on your call volume, channels, and service area — so you only pay for what you need.
                  </p>
                </div>
              </div>
            </div>

            <!-- Features Grid -->
            <div class="grid gap-3 px-6 pb-6 sm:grid-cols-3 sm:px-8">
              {features.map((f) => (
                <div class="pricing-feature">
                  <span class="pricing-feature-icon">
                    <Icon name={f.icon} class="text-lg text-primary" />
                  </span>
                  <div class="min-w-0">
                    <p class="text-sm font-semibold text-neutral-800">{f.title}</p>
                    <p class="text-xs leading-relaxed text-neutral-500">{f.description}</p>
                  </div>
                </div>
              ))}
            </div>

            <!-- CTA -->
            <div class="px-6 pb-8 text-center sm:px-8">
              <a
                href={bookCallURL}
                class="cta-button group inline-flex min-h-14 px-9 py-4 text-base font-bold"
              >
                Get Your Free Audit + Quote
                <Icon
                  name="mdi:arrow-right"
                  class="text-lg shrink-0 transition-transform group-hover:translate-x-0.5"
                />
              </a>
            </div>
          </div>
        </div>

        <!-- Trust Badges -->
        <div class="mt-12 flex flex-wrap items-center justify-center gap-6 sm:gap-8">
          {trustBadges.map((badge) => (
            <span class="inline-flex items-center gap-2 text-sm font-medium text-neutral-500">
              <Icon name={badge.icon} class="text-base text-primary" />
              {badge.label}
            </span>
          ))}
        </div>
      </div>
    </section>

    <!-- ROI Comparison Section -->
    <section class="section-spacing bg-white">
      <div class="container-custom">
        <div class="animate-on-scroll text-center mb-12">
          <span class="badge bg-primary/10 text-primary">ROI Comparison</span>
          <h2 class="mt-6 mb-4 text-3xl font-bold tracking-tight text-neutral-900 sm:text-4xl lg:text-5xl">
            Before vs. After Qasten
          </h2>
          <p class="mx-auto max-w-2xl text-lg leading-relaxed text-neutral-600">
            See the typical transformation our HVAC clients experience.
          </p>
        </div>

        <div class="animate-on-scroll mx-auto max-w-3xl">
          <div class="comparison-table">
            <!-- Header -->
            <div class="comparison-row comparison-header">
              <div class="comparison-metric">Metric</div>
              <div class="comparison-before-label">Without Qasten</div>
              <div class="comparison-after-label">With Qasten</div>
            </div>

            <!-- Row 1 -->
            <div class="comparison-row">
              <div class="comparison-metric">Missed Leads Per Week</div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-bad">10-15</span>
              </div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-good">0</span>
              </div>
            </div>

            <!-- Row 2 -->
            <div class="comparison-row">
              <div class="comparison-metric">Average Response Time</div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-bad">4+ hours</span>
              </div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-good">&lt; 5 seconds</span>
              </div>
            </div>

            <!-- Row 3 -->
            <div class="comparison-row">
              <div class="comparison-metric">Jobs Lost to Competitors</div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-bad">$3,000-5,000/mo</span>
              </div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-good">$0</span>
              </div>
            </div>

            <!-- Row 4 -->
            <div class="comparison-row">
              <div class="comparison-metric">Channel Coverage</div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-bad">Phone only</span>
              </div>
              <div class="comparison-cell">
                <span class="comparison-chip comparison-chip-good">Web, phone, text, chat</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  /* Hero animations */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .hero-trust-item {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    color: rgb(156 163 175);
    font-size: 0.85rem;
    font-weight: 500;
  }

  /* Pricing Card */
  .pricing-card-wrapper {
    position: relative;
  }

  .pricing-popular-bar {
    display: flex;
    justify-content: center;
    position: relative;
    z-index: 2;
    margin-bottom: -1.1rem;
  }

  .pricing-popular-bar::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--primary), transparent);
    border-radius: 999px;
  }

  .pricing-popular-badge {
    position: relative;
    display: inline-flex;
    align-items: center;
    border-radius: 9999px;
    padding: 0.5rem 1.25rem;
    font-size: 0.8rem;
    font-weight: 700;
    letter-spacing: 0.03em;
    background: var(--primary);
    color: var(--primary-foreground);
    box-shadow: 0 4px 14px rgb(74 125 189 / 0.3);
  }

  .pricing-main-card {
    position: relative;
    overflow: hidden;
    border-color: color-mix(in srgb, var(--primary), var(--border) 50%);
  }

  /* Custom Quote Box */
  .pricing-quote-box {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    border-radius: 0.85rem;
    border: 1px solid var(--border);
    background: rgb(74 125 189 / 0.04);
    padding: 1.25rem 1.5rem;
  }

  .pricing-quote-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.75rem;
    height: 2.75rem;
    border-radius: 0.75rem;
    background: rgb(74 125 189 / 0.12);
    flex-shrink: 0;
  }

  /* Features grid inside pricing card */
  .pricing-feature {
    display: flex;
    align-items: flex-start;
    gap: 0.6rem;
    border-radius: 0.7rem;
    border: 1px solid var(--border);
    background: var(--background);
    padding: 0.75rem 0.7rem;
  }

  .pricing-feature-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border-radius: 0.5rem;
    background: rgb(74 125 189 / 0.1);
    flex-shrink: 0;
  }

  /* Comparison Table */
  .comparison-table {
    border: 1px solid var(--border);
    border-radius: 1rem;
    overflow: hidden;
    background: var(--card);
    box-shadow: 0 1px 3px rgb(15 23 42 / 0.04);
  }

  .comparison-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    align-items: center;
    padding: 1.15rem 1.5rem;
    border-bottom: 1px solid var(--border);
  }

  .comparison-row:last-child {
    border-bottom: none;
  }

  .comparison-header {
    background: var(--background);
    padding: 1rem 1.5rem;
  }

  .comparison-metric {
    font-size: 0.95rem;
    font-weight: 600;
    color: #1e293b;
  }

  .comparison-header .comparison-metric {
    font-weight: 700;
    color: #0f172a;
  }

  .comparison-before-label,
  .comparison-after-label {
    text-align: center;
    font-size: 0.85rem;
    font-weight: 700;
    letter-spacing: 0.01em;
  }

  .comparison-before-label {
    color: #dc2626;
  }

  .comparison-after-label {
    color: var(--primary);
  }

  .comparison-cell {
    text-align: center;
  }

  .comparison-chip {
    display: inline-block;
    border-radius: 9999px;
    padding: 0.3rem 0.85rem;
    font-size: 0.82rem;
    font-weight: 600;
    white-space: nowrap;
  }

  .comparison-chip-bad {
    background: rgb(220 38 38 / 0.08);
    color: #dc2626;
  }

  .comparison-chip-good {
    background: rgb(74 125 189 / 0.08);
    color: var(--primary);
  }

  /* Responsive */
  @media (max-width: 639px) {
    .comparison-row {
      padding: 0.9rem 0.75rem;
    }

    .comparison-metric {
      font-size: 0.82rem;
    }

    .comparison-chip {
      font-size: 0.72rem;
      padding: 0.25rem 0.55rem;
    }

    .comparison-before-label,
    .comparison-after-label {
      font-size: 0.75rem;
    }
  }

  /* Responsive */
  @media (max-width: 639px) {
    .pricing-recovery {
      flex-direction: column;
      text-align: center;
    }

    .pricing-recovery > .flex {
      justify-content: center;
    }
  }
</style>

<script>
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.animate-on-scroll').forEach(el => {
    observer.observe(el);
  });
</script>
